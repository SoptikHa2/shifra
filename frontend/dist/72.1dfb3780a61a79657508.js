"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[72],{6292:(V,v,r)=>{r.r(v),r.d(v,{CipherModule:()=>R});var s=r(8583),w=r(5917),y=r(323),A=r(8002),u=r(3190),I=r(6888),P=r(3342),p=r(2238),t=r(7716),_=r(1095),m=r(6627),f=r(6715);function J(i,o){if(1&i&&t._UZ(0,"img",9),2&i){const n=t.oxw();t.Q6J("src",n.data.img,t.LSH)}}function U(i,o){if(1&i&&t._UZ(0,"markdown",10),2&i){const n=t.oxw();t.Q6J("data",n.data.msg)}}let Z=(()=>{class i{constructor(n){this.data=n}ngOnInit(){}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(p.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-hint-dialog"]],decls:14,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],["alt","obr\xe1zek","class","image",3,"src",4,"ngIf"],[3,"data",4,"ngIf"],["target","_blank","tabindex","-1",2,"display","none",3,"href"],["fileLink",""],["mat-raised-button","","color","primary","tabindex","-1",1,"download",3,"click"],["align","end"],["mat-button","","mat-dialog-close","","tabindex","0","color","accent"],["alt","obr\xe1zek",1,"image",3,"src"],[3,"data"]],template:function(n,e){if(1&n){const c=t.EpF();t.TgZ(0,"h2",0),t._uU(1," N\xe1pov\u011bda "),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.YNc(3,J,1,1,"img",2),t.YNc(4,U,1,1,"markdown",3),t._UZ(5,"a",4,5),t.TgZ(7,"button",6),t.NdJ("click",function(){return t.CHM(c),t.MAs(6).click()}),t.TgZ(8,"mat-icon"),t._uU(9," download "),t.qZA(),t._uU(10," Soubor ke sta\u017een\xed "),t.qZA(),t.qZA(),t.TgZ(11,"mat-dialog-actions",7),t.TgZ(12,"button",8),t._uU(13,"Skr\xfdt"),t.qZA(),t.qZA()}2&n&&(t.xp6(3),t.Q6J("ngIf",e.data.img),t.xp6(1),t.Q6J("ngIf",e.data.msg),t.xp6(1),t.Q6J("href",e.data.hint_file,t.LSH))},directives:[p.uh,p.xY,s.O5,_.lW,m.Hw,p.H8,p.ZT,f.lF],styles:[".download[_ngcontent-%COMP%]{width:100%;height:64px}.image[_ngcontent-%COMP%]{width:100%}"]}),i})();var b=r(5358),k=r(9075),g=r(8307),x=r(8295),O=r(9983),d=r(3679),h=r(9992),C=r(2458),T=r(4885);function Q(i,o){if(1&i&&t._UZ(0,"img",16),2&i){const n=t.oxw(2);t.Q6J("src",n.cipher.img,t.LSH)}}function H(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"div",12),t._UZ(1,"a",17,18),t.TgZ(3,"button",19),t.NdJ("click",function(){return t.CHM(n),t.MAs(2).click()}),t.TgZ(4,"mat-icon",20),t._uU(5,"download"),t.qZA(),t._uU(6," Soubor ke sta\u017een\xed "),t.qZA(),t.qZA()}if(2&i){const n=t.oxw(2);t.xp6(1),t.Q6J("href",n.cipher.cipher_file,t.LSH)}}function N(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"mat-list-option",23),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(3);return l.hintClick(a.hint_id,l.cipher)}),t.TgZ(1,"mat-icon",24),t._uU(2," help_outline "),t.qZA(),t.TgZ(3,"div",25),t._uU(4," N\xe1pov\u011bda "),t.qZA(),t.TgZ(5,"div",25),t._uU(6),t.qZA(),t.qZA()}if(2&i){const n=o.$implicit,e=t.oxw(3);t.xp6(6),t.hij(" (",e.getHintCostText(n),") ")}}function Y(i,o){if(1&i&&(t.TgZ(0,"mat-selection-list",21),t.YNc(1,N,7,1,"mat-list-option",22),t.qZA()),2&i){const n=t.oxw(2);t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",n.cipher.hints)}}function S(i,o){if(1&i&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.error," ")}}function L(i,o){1&i&&(t.ynx(0),t._uU(1," Odevzdat "),t.BQk())}function E(i,o){1&i&&t._UZ(0,"mat-spinner",27),2&i&&t.Q6J("diameter",36)}function F(i,o){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.qZA(),t.YNc(5,Q,1,1,"img",3),t.TgZ(6,"div",4),t._UZ(7,"markdown",5),t.qZA(),t.YNc(8,H,7,1,"div",6),t.TgZ(9,"div",7),t._uU(10," N\xe1pov\u011bdy "),t.qZA(),t.YNc(11,Y,2,2,"mat-selection-list",8),t.TgZ(12,"mat-form-field",9),t.TgZ(13,"mat-label"),t._uU(14," \u0158e\u0161en\xed "),t.qZA(),t.TgZ(15,"textarea",10),t.NdJ("ngModelChange",function(c){return t.CHM(n),t.oxw().solution=c}),t.qZA(),t.qZA(),t.YNc(16,S,2,1,"div",11),t.TgZ(17,"div",12),t.TgZ(18,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().makeAttempt()}),t.YNc(19,L,2,0,"ng-container",14),t.YNc(20,E,1,1,"ng-template",null,15,t.W1O),t.qZA(),t.qZA(),t.BQk()}if(2&i){const n=t.MAs(21),e=t.oxw();t.xp6(2),t.hij(" ",e.cipher.name," "),t.xp6(2),t.hij(" ",e.cipher.score," Bod\u016f "),t.xp6(1),t.Q6J("ngIf",e.cipher.img),t.xp6(2),t.Q6J("data",e.cipher.description),t.xp6(1),t.Q6J("ngIf",e.cipher.cipher_file),t.xp6(3),t.Q6J("ngIf",e.cipher.hints),t.xp6(4),t.Q6J("ngModel",e.solution),t.xp6(1),t.Q6J("ngIf",e.error),t.xp6(2),t.Q6J("disabled",e.submitting),t.xp6(1),t.Q6J("ngIf",!e.submitting)("ngIfElse",n)}}let z=(()=>{class i{constructor(n,e,c,a){this.cipherService=n,this.domSanitizer=e,this.dialog=c,this.route=a,this.solution="",this.submitting=!1,this.cipherId=this.route.snapshot.params.id,this.cipherObs=this.cipherService.getCipher(this.cipherId).pipe((0,A.U)(this.trustUrl.bind(this))),this.cipherObs.subscribe(l=>{this.cipher=l})}getHintCostText(n){return n.is_used?"Otev\u0159en\xe1":n.score_cost&&n.time_cost?`-${n.score_cost} bod\u016f, -${n.time_cost} sekund`:n.score_cost?`-${n.score_cost} bod\u016f`:n.time_cost?`-${n.time_cost} sekund`:"Zdarma"}ngOnInit(){}hintClick(n,e){const c=e.hints.find(a=>a.hint_id===n);if(null!=c){if(!c.score_cost&&!c.time_cost)return void this.cipherService.openHint(n).pipe((0,u.w)(a=>this.dialog.open(Z,{data:a,width:"100%"}).afterClosed())).subscribe();this.dialog.open(y.K,{data:{text:"Opravdu chcete n\xe1pov\u011bdu?"}}).afterClosed().pipe((0,I.n)(a=>!a),(0,u.w)(a=>a?this.cipherService.openHint(n):(0,w.of)(null)),(0,P.b)(a=>{null!=a&&(c.score_cost=c.time_cost=void 0)}),(0,u.w)(a=>this.dialog.open(Z,{data:a,width:"100%"}).afterClosed())).subscribe()}}trustUrl(n){return Object.assign(Object.assign({},n),{img:this.domSanitizer.bypassSecurityTrustUrl(n.img)})}makeAttempt(){this.submitting=!0,this.cipherService.makeAttempt(this.cipherId,this.solution).subscribe(()=>{this.submitting=!1},n=>{this.error=n,this.submitting=!1})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(b.u),t.Y36(k.H7),t.Y36(p.uw),t.Y36(g.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-cipher"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mat-display-1","label"],[1,"score-display"],["class","main-image","alt","obr\xe1zek",3,"src",4,"ngIf"],[1,"cipher-container"],[1,"markdown",3,"data"],["class","button-row",4,"ngIf"],[1,"mat-display-1","hint-label"],["class","hint-list",3,"multiple",4,"ngIf"],["appearance","outline",1,"solution"],["rows","5","matInput","",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],[1,"button-row"],["mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["spinner",""],["alt","obr\xe1zek",1,"main-image",3,"src"],["target","_blank",2,"display","none",3,"href"],["fileLink",""],["mat-raised-button","","color","accent",3,"click"],[2,"margin-right","2px"],[1,"hint-list",3,"multiple"],["style","cursor: pointer",3,"click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],["mat-list-icon",""],["mat-line",""],[1,"error"],[2,"margin","5px auto",3,"diameter"]],template:function(n,e){1&n&&t.YNc(0,F,22,11,"ng-container",0),2&n&&t.Q6J("ngIf",e.cipher)},directives:[s.O5,f.lF,x.KE,x.hX,O.Nt,d.Fj,d.JJ,d.On,_.lW,m.Hw,h.Ub,s.sg,h.vS,h.Nh,C.X2,T.$g],styles:["[_nghost-%COMP%]{display:block;padding:0 64px 64px;box-sizing:border-box}@media screen and (max-width: 560px){[_nghost-%COMP%]{padding:0 32px 64px}}.main-image[_ngcontent-%COMP%]{width:100%;padding-bottom:16px}.score-display[_ngcontent-%COMP%]{text-align:center;font-size:21px;padding-bottom:8px;margin-bottom:16px;border-bottom:2px solid white}.label[_ngcontent-%COMP%]{text-align:center;margin-bottom:8px;padding:32px 0 16px;border-bottom:2px solid white}@media screen and (max-width: 325px){.cipher-container[_ngcontent-%COMP%]{width:95%}}.button-row[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 48px;font-size:16px}.solution[_ngcontent-%COMP%]{width:100%;margin-top:32px;font-size:18px}.hint-label[_ngcontent-%COMP%]{text-align:center;margin:32px 0 8px}.hint-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex}.error[_ngcontent-%COMP%]{padding:12px 0;margin-bottom:16px;text-align:center;border-radius:5px}"]}),i})();var j=r(1397);function B(i,o){if(1&i&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&i){const n=o.ngIf;t.xp6(1),t.hij(" ",n.name," ")}}function D(i,o){1&i&&(t.TgZ(0,"mat-icon",9),t._uU(1," done_outline "),t.qZA())}function $(i,o){1&i&&(t.TgZ(0,"mat-icon",10),t._uU(1," help_outline "),t.qZA())}const q=function(i){return["/cipher",i]};function W(i,o){if(1&i&&(t.TgZ(0,"div",5),t.O4$(),t._UZ(1,"svg",6),t.kcU(),t.TgZ(2,"div"),t.YNc(3,D,2,0,"mat-icon",7),t.YNc(4,$,2,0,"mat-icon",8),t._UZ(5,"br"),t._uU(6),t.qZA(),t.qZA()),2&i){const n=o.$implicit;t.Q6J("routerLink",t.VKq(4,q,n.cipher_id)),t.xp6(3),t.Q6J("ngIf",n.solved),t.xp6(1),t.Q6J("ngIf",!n.solved),t.xp6(2),t.hij(" ",n.name," ")}}function X(i,o){if(1&i&&(t.ynx(0),t.YNc(1,W,7,6,"div",4),t.BQk()),2&i){const n=o.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}let K=(()=>{class i{constructor(n,e,c){this.cipherService=n,this.gameService=e,this.route=c,this.ciphersObs=this.cipherService.getVisibleCiphers(this.route.snapshot.params.id),this.gameObs=this.gameService.getGameById(this.route.snapshot.params.id)}ngOnInit(){}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(b.u),t.Y36(j.h),t.Y36(g.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-cipher-list"]],decls:5,vars:6,consts:[["class","mat-display-1 title",4,"ngIf"],[1,"btn-container"],[4,"ngIf"],[1,"mat-display-1","title"],["class","main-menu-item noselect","matRipple","",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"main-menu-item","noselect",3,"routerLink"],["viewBox","0 0 1 1"],["class","material-icons-outlined success",4,"ngIf"],["class","material-icons-outlined warn",4,"ngIf"],[1,"material-icons-outlined","success"],[1,"material-icons-outlined","warn"]],template:function(n,e){1&n&&(t.YNc(0,B,2,1,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t.YNc(3,X,2,1,"ng-container",2),t.ALo(4,"async"),t.qZA()),2&n&&(t.Q6J("ngIf",t.lcZ(1,2,e.gameObs)),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,4,e.ciphersObs)))},directives:[s.O5,s.sg,C.wG,g.rH,m.Hw],pipes:[s.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;width:100%;height:100%;box-sizing:border-box;overflow-y:auto;overflow-x:hidden;align-items:center;justify-content:center}.main-menu-item[_ngcontent-%COMP%]{border-radius:32px;display:grid;position:relative;flex:1;min-width:256px;margin:32px;border:2px solid white;cursor:pointer;overflow:hidden}.main-menu-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-area:1/1}.main-menu-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;width:100%;height:100%;top:0;left:0;align-items:center;justify-content:center}.main-menu-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.filler[_ngcontent-%COMP%]{flex:1;min-width:256px;margin:0 32px;height:0}@media screen and (max-width: 560px){.main-menu-item[_ngcontent-%COMP%]{min-width:calc(100% - 64px);height:calc(50% - 64px);cursor:auto}}","[_nghost-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:flex-start}.main-menu-item[_ngcontent-%COMP%]{max-height:200px}.mat-display-1[_ngcontent-%COMP%]{margin-top:48px}mat-icon.done[_ngcontent-%COMP%]{color:green}.btn-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.title[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),i})();var M=r(4186);const G=[{path:":id",component:z,canActivate:[M.e]},{path:"visible/:id",component:K,canActivate:[M.e]}];let R=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[s.ez,g.Bz.forChild(G),f.JP,d.u5,m.Ps,C.si,_.ot,x.lN,O.c,h.ie,p.Is,T.Cq]]}),i})()}}]);